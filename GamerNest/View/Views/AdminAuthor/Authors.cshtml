@model Support.ModelList
@{
    ViewData["Title"] = "Admin - Authors";
}

<partial name="_LateralMenu"/>


<main class="home-section">
    <div class="text">
        <h1>Authors</h1>

        <h3>This is the Users tab. all registered users information will be displayed here.</h3>

        <div class="adminTable">
            <table>
                <tr>
                    <th>Actions</th> <!-- Added "Actions" column header -->
                    @foreach ( var prop in Model.authorList.First().GetType().GetProperties() )
                    {
                        // Exclude "Password" column from table
                        if ( prop.Name.ToLower() != "password" )
                        {
                            <th>@prop.Name</th>
                        }
                    }
                </tr>
                @foreach ( var item in Model.authorList )
                {
                    <tr>
                        <td>
                            <!-- Read Author -->
                            <a asp-controller="AdminAuthor" asp-action="ReadAuthor" asp-route-id="@item.id">
                                <i class="fa-solid fa-eye"></i>
                            </a>

                            <!-- Edit Author -->
                            <a asp-controller="AdminAuthor" asp-action="EditAuthor" asp-route-id="@item.id">
                                <i class="fa-solid fa-pen"></i>
                            </a>

                            <!-- Delete Author -->
                            <a id="deleteAction" class="delete-action">
                                <i class="fa-solid fa-trash-can"></i>
                            </a>

                            <!-- Modal -->
                            <div id="confirmationModal" class="modal">
                                <div class="modal-content">
                                    <h2>Confirmation</h2>
                                    <p>Are you sure you want to delete this row?</p>
                                    <div class="modal-actions">
                                        <button id="confirmBtn" asp-controller="AdminAuthor" asp-action="EditAuthor" data-row-id="@item.id">Delete</button>
                                        <button id="cancelBtn">Cancel</button>
                                    </div>
                                </div>
                            </div>



                        </td>
                        @foreach ( var prop in item.GetType().GetProperties() )
                        {
                            // Exclude "Password" column from table
                            if ( prop.Name.ToLower() != "password" )
                            {
                                <td>
                                    @if ( prop.PropertyType == typeof( bool ) )
                                    {
                                        @if ( (bool) prop.GetValue( item ) )
                                        {
                                            <i class="far fa-circle-check checkmark-icon"></i>
                                        }
                                        else
                                        {
                                            <i class="far fa-circle-xmark xmark-icon"></i>
                                        }
                                    }
                                    else if ( prop.PropertyType == typeof( string ) && ((string) prop.GetValue( item ))?.StartsWith( "/img/" ) == true )
                                    {
                                        <img class="image-cell" src="@prop.GetValue(item)" alt="Image">
                                    }
                                    else
                                    {
                                        @prop.GetValue(item)
                                    }
                                </td>
                            }
                        }
                    </tr>
                }
            </table>
        </div>


        
    </div>
</main>